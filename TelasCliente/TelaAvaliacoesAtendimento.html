<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="TelaAvalicoesAtendimento.css">
  <title>Avaliação de Atendimento - SISTEMA PIM</title>
</head>
<body>
  <div class="container">
    <div class="info-top">
      <h2>Avaliações de Atendimento</h2>
      <div class="tema-toggle">
        <button onclick="setTema('claro')">Tema Claro</button>
        <button onclick="setTema('escuro')">Tema Escuro</button>
      </div>
    </div>

    <h3>Qual chamado você deseja avaliar?</h3>
    <div class="form-group">
      <input type="text" id="protocolo" placeholder="Digite o protocolo">
      <div class="button">      
        <button class="btn-principal" onclick="verificarProtocolo()">AVALIAR</button>
      </div>
    </div>
    <div id="mensagem" class="mensagem-erro"></div>

    <div class="area-avaliacao" id="areaAvaliacao">
      <textarea placeholder="Descreva como foi o atendimento..."></textarea>
      <select>
        <option disabled selected>Selecione uma nota</option>
        <option>Muito satisfeito</option>
        <option>Satisfeito</option>
        <option>Insatisfeito</option>
        <option>Muito insatisfeito</option>
      </select>
    </div>

    <div class="button">
        <button class="btn-secundario" href="TelaInicialCliente.html">VOLTAR</button>
    </div>
  </div>

  <script>
    function verificarProtocolo() {
      const protocolo = document.getElementById('protocolo').value.trim();
      const mensagemDiv = document.getElementById('mensagem');
      const areaAvaliacao = document.getElementById('areaAvaliacao');

      // Simulando chamados finalizados e em andamento
      const chamadosFinalizados = ['123456', '987654'];
      const chamadosEmAndamento = ['111111'];

      if (protocolo === '') {
        mensagemDiv.textContent = 'Por favor, digite um número de protocolo.';
        areaAvaliacao.style.display = 'none';
      } else if (chamadosFinalizados.includes(protocolo)) {
        mensagemDiv.textContent = '';
        areaAvaliacao.style.display = 'block';
      } else if (chamadosEmAndamento.includes(protocolo)) {
        mensagemDiv.textContent = 'Este chamado ainda está em andamento e não pode ser avaliado.';
        areaAvaliacao.style.display = 'none';
      } else {
        mensagemDiv.textContent = 'Nenhum chamado encontrado com este número.';
        areaAvaliacao.style.display = 'none';
      }
    }
    
        function setTema(tema) {
         if (tema === 'escuro') {
           document.body.classList.add('dark');
         } else {
           document.body.classList.remove('dark');
         }
      }
  </script>
</body>
</html>
